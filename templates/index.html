<!DOCTYPE html>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
    </head>
    <body>
        <div class="row">
            <!-- Front Yard -->
            <div class="col-4">
                <div class="card full-height-panel panel" style="background-color:rgb(105, 174, 105);">
                    <div class="card-header">
                        Front Yard
                    </div>
                    <div class="card-body">
                        <div class="input-group">
                            <input type="text" id="frontyard-plant-name-input" class="form-control plant-name-input" placeholder="Plant name">
                            <div class="input-group-append">
                                <button id="frontyard-add-plant-button" class="btn btn-primary add-plant-button" type="button">Add Plant</button>
                            </div>
                        </div>
                        <table id="frontyard-plant-table" class="table plant-table">
                        <thead>
                            <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Next Water</th>
                            <th scope="col">Frequency</th>
                            <th scope="col">Events</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Table Rows Here -->
                        </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Inside -->
            <div class="col-4">
                <!-- Sunlight -->
                <div class="card half-height-panel panel" style="background-color:rgb(255, 255, 124);">
                    <div class="card-header">
                        Inside (Sunlight)
                    </div>
                    <div class="card-body">
                        <div class="input-group">
                            <input type="text" id="isl-plant-name-input" class="form-control plant-name-input" placeholder="Plant name">
                            <div class="input-group-append">
                                <button id="isl-add-plant-button" class="btn btn-primary add-plant-button" type="button">Add Plant</button>
                            </div>
                        </div>
                        <table id="isl-plant-table" class="table plant-table">
                        <thead>
                            <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Next Water</th>
                            <th scope="col">Frequency</th>
                            <th scope="col">Events</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Table Rows Here -->
                        </tbody>
                        </table>
                    </div>
                </div>
                <!-- Low-light -->
                <div class="card half-height-panel panel" style="background-color:rgb(200, 200, 200);">
                    <div class="card-header">
                        Inside (Low-light)
                    </div>
                    <div class="card-body">
                        <div class="input-group">
                            <input type="text" id="ill-plant-name-input" class="form-control plant-name-input" placeholder="Plant name">
                            <div class="input-group-append">
                                <button id="ill-add-plant-button" class="btn btn-primary add-plant-button" type="button">Add Plant</button>
                            </div>
                        </div>
                        <table id="ill-plant-table" class="table plant-table">
                        <thead>
                            <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Next Water</th>
                            <th scope="col">Frequency</th>
                            <th scope="col">Events</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Table Rows Here -->
                        </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Back Yard -->
            <div class="col-4">
                <div class="card full-height-panel panel" style="background-color:rgb(105, 174, 105);">
                    <div class="card-header">
                        Back Yard
                    </div>
                    <div class="card-body">
                        <div class="input-group">
                            <input type="text" id="backyard-plant-name-input" class="form-control plant-name-input" placeholder="Plant name">
                            <div class="input-group-append">
                                <button id="backyard-add-plant-button" class="btn btn-primary add-plant-button" type="button">Add Plant</button>
                            </div>
                        </div>
                        <table id="backyard-plant-table" class="table plant-table">
                        <thead>
                            <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Next Water</th>
                            <th scope="col">Frequency</th>
                            <th scope="col">Events</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Table Rows Here -->
                        </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
<!-- Place this in the script tag or in an external JavaScript file -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        let buttons = document.querySelectorAll('.add-plant-button');
        buttons.forEach(function(button) {
            button.addEventListener('click', function(event) {
            let panel = event.target.closest('.panel');
            let input = panel.querySelector('.plant-name-input');
            let table = panel.querySelector('.plant-table');
            let newRow = table.insertRow();
            let cell1 = newRow.insertCell(0);
            let cell2 = newRow.insertCell(1);
            let cell3 = newRow.insertCell(2);
            let cell4 = newRow.insertCell(3);
            plant_name = input.value;
            cell1.innerHTML = plant_name;
            cell2.innerHTML = "Next Water";
            cell3.innerHTML = "Frequency";
            cell4.innerHTML = "";
            input.value = "";
            // Add this inside your button click event, after adding a new row
            newRow.addEventListener('click', function(event) {
                if (this.classList.contains('expanded')) {
                    this.classList.remove('expanded');
                    // Reset to original row state
                    this.innerHTML = `
                        <td>${cell1.innerHTML}</td>
                        <td>Next Water</td>
                        <td>Frequency</td>
                        <td>TBD</td>
                    `;
                } else {
                    this.classList.add('expanded');
                    // Show additional info and delete button
                    this.innerHTML = `
                        <td>${cell1.innerHTML}</td>
                        <td>Next Water</td>
                        <td>Frequency</td>
                        <td>TBD</td>
                        <td>Additional Info</td>
                        <td><button class="btn btn-danger delete-row">X</button></td>
                    `;
                    this.querySelector('.delete-row').addEventListener('click', function(e) {
                        e.stopPropagation();  // Prevent triggering row's click event
                        newRow.remove();  // Remove the row
                    });
                    }
                });
            });
        });
    });
</script>
